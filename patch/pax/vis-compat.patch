--- a/vis.h
+++ b/vis.h
@@ -72,9 +72,9 @@
  */
 #define	UNVIS_END	1	/* no more characters */
 
-#include <sys/cdefs.h>
-
-__BEGIN_DECLS
+#ifdef __cplusplus
+extern "C" {
+#endif
 char	*vis(char *, int, int, int);
 int	strvis(char *, const char *, int);
 int	stravis(char **, const char *, int);
@@ -87,6 +87,8 @@
 ssize_t strnunvis(char *, const char *, size_t)
 		__attribute__ ((__bounded__(__string__,1,3)));
 
-__END_DECLS
+#ifdef __cplusplus
+}
+#endif
 
 #endif /* !_VIS_H_ */
