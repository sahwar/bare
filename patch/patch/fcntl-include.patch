--- a/inp.c
+++ b/inp.c
@@ -39,6 +39,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <unistd.h>
+#include <fcntl.h>
 
 #include "common.h"
 #include "util.h"
--- a/src/usr.bin/patch/util.c
+++ b/util.c
@@ -39,6 +39,7 @@
 #include <stdio.h>
 #include <string.h>
 #include <unistd.h>
+#include <fcntl.h>
 
 #include "common.h"
 #include "util.h"
